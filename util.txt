uitility function for version 3